<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Para Rosmery - Jos√©</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Georgia', serif;
            background: linear-gradient(135deg, #1a2a6c 0%, #b21f1f 50%, #fdbb2d 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 20px; overflow: hidden;
        }
        @keyframes gradientShift { 0% { background-position: 0% 50%; } 50% { background-position: 100% 50%; } 100% { background-position: 0% 50%; } }
        
        .container {
            background: rgba(255, 255, 255, 0.96); border-radius: 25px; padding: 40px 30px; max-width: 450px; width: 100%;
            box-shadow: 0 25px 70px rgba(0, 0, 0, 0.5); text-align: center; position: relative; z-index: 10;
        }

        .message-box {
            height: 300px; overflow-y: auto; margin: 20px 0; padding: 25px; background: rgba(0, 0, 0, 0.02);
            border-radius: 15px; font-size: 17px; line-height: 1.8; color: #2c3e50; text-align: left; font-style: italic;
            scroll-behavior: smooth; position: relative;
        }
        .message-box::-webkit-scrollbar { width: 0px; }

        .burning {
            animation: burnText 3.5s forwards;
            text-shadow: 0 0 10px #ff4500, 0 0 20px #ff0000;
        }

        @keyframes burnText {
            0% { color: #2c3e50; filter: blur(0); }
            30% { color: #ff4500; transform: scale(1.02); filter: blur(1px); }
            100% { color: #555; opacity: 0; transform: translateY(-30px) rotate(3deg); filter: blur(12px); }
        }

        .ashes-message {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 85%; opacity: 0; text-align: center; transition: opacity 3.5s ease;
            color: #2c3e50; font-weight: bold; font-style: normal;
        }

        .show-ashes { opacity: 1 !important; }

        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none;
            padding: 15px 45px; font-size: 16px; border-radius: 50px; cursor: pointer; font-weight: bold; text-decoration: none; display: inline-block;
        }
        
        .youtube-button { background: #FF0000; margin-bottom: 15px; font-size: 14px; padding: 12px 30px; }
        .timer { font-size: 11px; color: #95a5a6; margin-top: 10px; }
        .countdown { font-size: 20px; color: #b21f1f; font-weight: bold; margin-top: 20px; font-family: monospace; }
    </style>
</head>
<body>
    <div class="container" id="app">
        <p>Cargando...</p>
    </div>

    <script>
        // CONFIGURACI√ìN: 14 de Febrero de 2026
        const FECHA_INICIO = new Date(2026, 1, 14, 0, 0, 0); 
        const FECHA_FIN = new Date(2026, 1, 15, 0, 0, 0);    
        const MENSAJE = `Hola Rosmery, perdona por molestarte, pero la verdad es que en este d√≠a, pues solo quer√≠a agradecerte por los momentos hermosos y felices que me permitiste vivir a tu lado...\n\nFuiste una mujer muy especial para m√≠, fuiste ese alguien que me hizo conocer lo que es realmente estar enamorado y sentir lo que es el amor... Y nada, fuiste una de las cosas m√°s bonitas que me ha pasado en la vida.\n\nDuele tanto que las cosas no hayan salido como quer√≠amos, pero ni modo. Solo te deseo que seas muy feliz y que tengas muchos √©xitos... Siempre estar√°s en alg√∫n pedazo de mi coraz√≥n.\n\nTe amo y te quiero mucho... Cu√≠date.`;

        // Utilidad para manejar localStorage de forma segura
        const storage = {
            get: (key) => {
                try { return localStorage.getItem(key); } 
                catch (e) { return window['temp_' + key] || null; }
            },
            set: (key, val) => {
                try { localStorage.setItem(key, val); } 
                catch (e) { window['temp_' + key] = val; }
            }
        };

        function iniciar() {
            const app = document.getElementById('app');
            if (!app) return;

            const ahora = new Date();
            const tiempoApertura = storage.get('mensaje_abierto');

            // Verificar si el tiempo de visualizaci√≥n expir√≥ (1 hora)
            if (tiempoApertura) {
                const tiempoTranscurrido = ahora - new Date(parseInt(tiempoApertura));
                if (tiempoTranscurrido >= 3600000) {
                    mostrarExpirado();
                    return;
                }
            }
            
            // L√≥gica de fechas
            if (ahora < FECHA_INICIO) {
                mostrarBloqueado();
            } else if (ahora >= FECHA_FIN) {
                mostrarFechaExpirada();
            } else {
                if (tiempoApertura) {
                    iniciarExperiencia();
                } else {
                    mostrarBienvenida();
                }
            }
        }

        function mostrarBloqueado() {
            const app = document.getElementById('app');
            app.innerHTML = `
                <div style="font-size: 50px;">üîí</div>
                <h2 style="margin-top:15px; font-size: 24px;">Hola Rosmery, soy Jos√©</h2>
                <p style="color:#7f8c8d; margin-top:15px; line-height: 1.5;">
                    Te he dejado un mensaje y, si deseas,<br>lo puedes ver el 14 de febrero.
                </p>
                <div class="countdown" id="timer-bloqueo"></div>
            `;
            const intervalo = setInterval(() => {
                const ahora = new Date();
                const diff = FECHA_INICIO - ahora;
                if (diff <= 0) { 
                    clearInterval(intervalo);
                    location.reload(); 
                }
                const d = Math.floor(diff / 86400000);
                const h = Math.floor((diff % 86400000) / 3600000);
                const m = Math.floor((diff % 3600000) / 60000);
                const s = Math.floor((diff % 60000) / 1000);
                const el = document.getElementById('timer-bloqueo');
                if(el) el.textContent = `${d}d ${h}h ${m}m ${s}s`;
            }, 1000);
        }

        function mostrarFechaExpirada() {
            document.getElementById('app').innerHTML = `
                <div style="font-size: 50px;">‚è∞</div>
                <h2 style="margin-top:15px; font-size: 24px;">El tiempo ha pasado</h2>
                <p style="color:#7f8c8d; margin-top:15px; line-height: 1.5;">Este mensaje solo estuvo disponible el 14 de febrero.</p>
                <p style="color:#95a5a6; margin-top:20px; font-size: 14px;">Cu√≠date mucho.</p>
            `;
        }

        function mostrarExpirado() {
            document.getElementById('app').innerHTML = `
                <div style="font-size: 50px;">‚åõ</div>
                <h2 style="margin-top:15px;">El tiempo expir√≥</h2>
                <p style="color:#7f8c8d; margin-top:15px; line-height: 1.5;">El mensaje ya no est√° disponible.</p>
            `;
        }

        function mostrarBienvenida() {
            document.getElementById('app').innerHTML = `
                <div style="font-size: 50px;">üíå</div>
                <h2 style="margin-top:15px;">Hola Rosmery, soy Jos√©</h2>
                <p style="color:#7f8c8d; margin-top:10px;">He preparado algo para ti.</p>
                <div style="margin-top: 30px;">
                    <button class="button" onclick="abrirMensaje()">Abrir mensaje</button>
                </div>
            `;
        }

        function abrirMensaje() {
            storage.set('mensaje_abierto', Date.now().toString());
            iniciarExperiencia();
        }

        function iniciarExperiencia() {
            document.getElementById('app').innerHTML = `
                <div style="font-size: 50px;">üíô</div>
                <h2>Para ti</h2>
                <a href="https://youtu.be/ue0RP3C1Brg" target="_blank" class="button youtube-button">‚ñ∂Ô∏è Escuchar m√∫sica</a>
                <div class="message-box" id="box">
                    <span id="texto-mensaje"></span>
                    <div id="ashes" class="ashes-message">
                        <p style="color: #7f8c8d; font-size: 14px; margin-bottom: 10px; font-style: italic;">Las palabras se las lleva el tiempo...</p>
                        Los recuerdos quedar√°n para siempre.<br>Gracias por todo.
                    </div>
                </div>
                <div class="timer">Este mensaje se cerrar√° en: <span id="clock">1:00:00</span></div>
            `;
            escribirTexto();
            iniciarRelojDestruccion();
        }

        function escribirTexto() {
            const elemento = document.getElementById('texto-mensaje');
            const box = document.getElementById('box');
            let i = 0;
            function escribir() {
                if (elemento && i < MENSAJE.length) {
                    elemento.textContent += MENSAJE.charAt(i);
                    i++;
                    box.scrollTop = box.scrollHeight;
                    setTimeout(escribir, 95);
                } else {
                    setTimeout(quemarMensaje, 8000);
                }
            }
            escribir();
        }

        function quemarMensaje() {
            const texto = document.getElementById('texto-mensaje');
            const ashes = document.getElementById('ashes');
            if(texto) texto.classList.add('burning');
            setTimeout(() => {
                if(ashes) ashes.classList.add('show-ashes');
            }, 2500);
        }

        function iniciarRelojDestruccion() {
            const tiempoApertura = parseInt(storage.get('mensaje_abierto'));
            const ahora = Date.now();
            const tiempoTranscurrido = Math.floor((ahora - tiempoApertura) / 1000);
            let tiempo = 3600 - tiempoTranscurrido; 
            
            const clock = document.getElementById('clock');
            const interval = setInterval(() => {
                tiempo--;
                if (tiempo <= 0) {
                    clearInterval(interval);
                    mostrarExpirado();
                } else if(clock) {
                    let m = Math.floor(tiempo / 60);
                    let s = tiempo % 60;
                    clock.textContent = `0:${m.toString().padStart(2, '0')}:${s.toString().padStart(2, '0')}`;
                }
            }, 1000);
        }

        // Ejecutar al cargar
        window.onload = iniciar;
    </script>
</body>
</html>
    